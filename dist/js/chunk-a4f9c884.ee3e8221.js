(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a4f9c884"],{2209:function(e,t,s){},"2f21":function(e,t,s){"use strict";var a=s("79e5");e.exports=function(e,t){return!!e&&a((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},"4ec4":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-select",{attrs:{value:e.$t(e.typeName+"."+e.value)},on:{input:function(t){return e.change(t)}}},e._l(e.typeOptions,(function(t){return s("el-option",{key:t.value,attrs:{label:e.$t(e.typeName+"."+t.label),value:t.value}})})),1)},n=[],l={props:{value:{default:0},typeOptions:{type:Array,default:function(){return[{value:"0",label:"0"},{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"},{value:"13",label:"13"},{value:"14",label:"14"},{value:"15",label:"15"},{value:"16",label:"16"},{value:"17",label:"17"},{value:"18",label:"18"},{value:"19",label:"19"},{value:"20",label:"20"},{value:"21",label:"21"},{value:"22",label:"22"},{value:"23",label:"23"},{value:"24",label:"24"},{value:"25",label:"25"},{value:"26",label:"26"},{value:"27",label:"27"},{value:"28",label:"28"},{value:"29",label:"29"},{value:"30",label:"30"},{value:"31",label:"31"},{value:"228",label:"228"},{value:"229",label:"229"},{value:"230",label:"230"},{value:"231",label:"231"},{value:"232",label:"232"},{value:"40",label:"40"},{value:"41",label:"41"},{value:"42",label:"42"},{value:"43",label:"43"},{value:"44",label:"44"},{value:"45",label:"45"},{value:"46",label:"46"},{value:"47",label:"47"},{value:"48",label:"48"},{value:"49",label:"49"}]}},typeName:{type:String,default:"type"}},methods:{change:function(e){this.$emit("change",e)}}},o=l,i=s("2877"),u=Object(i["a"])(o,a,n,!1,null,null,null);t["a"]=u.exports},"55dd":function(e,t,s){"use strict";var a=s("5ca1"),n=s("d8e8"),l=s("4bf8"),o=s("79e5"),i=[].sort,u=[1,2,3];a(a.P+a.F*(o((function(){u.sort(void 0)}))||!o((function(){u.sort(null)}))||!s("2f21")(i)),"Array",{sort:function(e){return void 0===e?i.call(l(this)):i.call(l(this),n(e))}})},"64c7":function(e,t,s){"use strict";var a=s("2209"),n=s.n(a);n.a},c5cc:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"consensus w1200"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.myNodeLoading,expression:"myNodeLoading"}],staticClass:"my-node shadow1"},[s("div",{staticClass:"head"},[s("h3",{staticClass:"fl"},[e._v(e._s(e.$t("consensus.consensus11")))]),e.myNodeData.agentId?s("div",{staticClass:"node-info fl"},[s("ul",[s("li",{staticClass:"uppercase"},[e._v("ID: "+e._s(e.myNodeData.agentId))]),s("li",[e._v(e._s(e.$t("public.alias"))+": "+e._s(e.myNodeData.alias||"-"))]),s("li",[e._v(e._s(e.$t("consensus.consensus12"))+": "+e._s(e.judgeNodeType(e.myNodeData.bankNode,e.myNodeData.status)))])])]):e._e(),e.myNodeData.agentId?s("div",{staticClass:"to-node-detail click fCN fr",on:{click:function(t){return e.toUrl("consensusInfo",e.myNodeData.txHash)}}},[e._v("\n        "+e._s(e.$t("consensus.consensus13"))+"\n      ")]):e._e()]),s("div",{staticClass:"body"},[e.myNodeData.agentId?s("div",{staticClass:"exist-node"},[s("div",[e._v(e._s(e.$t("public.deposit"))),s("p",[e._v(e._s(e.myNodeData.deposit+" NVT"))])]),s("div",[e._v(e._s(e.$t("consensus.consensus15"))),s("p",[e._v(e._s(e.myNodeData.ranking))])]),s("div",[e._v(e._s(e.$t("consensus.consensus16"))),s("p",[e._v(e._s(e.myNodeData.reward))])]),s("div",[e._v(e._s(e.$t("public.credit"))),s("p",[e._v(e._s(e.myNodeData.creditValue))])])]):s("div",{staticClass:"create-node"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.toUrl("newConsensus")}}},[e._v(e._s(e.$t("newConsensus.newConsensus0")))])],1)])]),s("el-tabs",{staticClass:"tab-list",on:{"tab-click":e.handleClick},model:{value:e.consensusActive,callback:function(t){e.consensusActive=t},expression:"consensusActive"}},[s("el-tab-pane",{attrs:{label:e.$t("consensus.consensus9"),name:"consensusFirst"}},[s("div",{staticClass:"filter"},[s("SelectBar",{attrs:{typeOptions:e.nodeTypeOptions,typeName:"nodeType"},on:{change:e.changeNodeType},model:{value:e.nodeTypeRegion,callback:function(t){e.nodeTypeRegion=t},expression:"nodeTypeRegion"}}),s("SelectBar",{attrs:{typeOptions:e.nodeStatusOptions,typeName:"nodeStatus"},on:{change:e.changeNodeStatus},model:{value:e.nodeStatusRegion,callback:function(t){e.nodeStatusRegion=t},expression:"nodeStatusRegion"}}),s("el-input",{staticClass:"search",attrs:{placeholder:e.$t("consensus.consensus10"),"suffix-icon":"el-icon-search"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[s("i",{staticClass:"iconfont icon-search_icon fr click"})]),s("i",{staticClass:"fr click",class:e.viewList?"el-icon-s-unfold":"el-icon-menu",on:{click:function(t){e.viewList=!e.viewList}}})],1),s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.allNodeLoading,expression:"allNodeLoading"},{name:"show",rawName:"v-show",value:e.viewList,expression:"viewList"}],staticClass:"node"},[e._l(e.searchData,(function(t){return s("div",{key:t.agentId,staticClass:"node_info shadow1"},[s("h4",[s("span",{staticClass:"uppercase fCN fw"},[e._v(e._s(t.agentId))]),e._v("Â \n            "),s("i",{staticClass:"iconfont fr",class:0===t.status?"icondaigongshi fred":"icongongshizhong fCN"})]),s("ul",{staticClass:"bg-white click",on:{click:function(s){return e.toUrl("consensusInfo",t.txHash)}}},[s("li",[e._v(e._s(e.$t("public.alias"))),s("span",[e._v(e._s(t.agentAlias||"-"))])]),s("li",[e._v(e._s(e.$t("consensus.consensus12"))),s("span",[e._v(e._s(e.judgeNodeType(t.bankNode,t.status)))])]),s("li",[e._v(e._s(e.$t("public.deposit"))),s("span",[e._v(e._s(t.deposit)),s("font",{staticClass:"fCN"},[e._v(" NVT")])],1)]),s("li",[e._v(e._s(e.$t("public.credit"))),s("span",[e._v(e._s(t.creditValue))])])])])})),s("div",{staticClass:"cb"})],2),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.viewList,expression:"!viewList"},{name:"loading",rawName:"v-loading",value:e.allNodeLoading,expression:"allNodeLoading"}],staticClass:"c_tabs"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.searchData,stripe:""}},[s("el-table-column",{attrs:{label:"",width:"80"}}),s("el-table-column",{attrs:{label:"ID","min-width":"150",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticClass:"cursor-p click uppercase",on:{click:function(s){return e.toUrl("consensusInfo",t.row.txHash)}}},[e._v(e._s(t.row.agentId))])]}}])}),s("el-table-column",{attrs:{label:e.$t("public.alias"),"min-width":"150",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.agentAlias?t.row.agentAlias:"-"))])]}}])}),s("el-table-column",{attrs:{prop:"creditValue",label:e.$t("public.credit"),"min-width":"150"}}),s("el-table-column",{attrs:{label:e.$t("public.deposit")+" (NVT)","min-width":"150",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticClass:"cursor-p click uppercase",on:{click:function(s){return e.toUrl("consensusInfo",t.row.txHash,"three")}}},[e._v(e._s(t.row.deposit))])]}}])}),s("el-table-column",{attrs:{label:e.$t("consensus.consensus12"),"min-width":"150",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e.judgeNodeType(t.row.bankNode,t.row.status)))])]}}])})],1)],1)])],1)],1)},n=[],l=(s("ac4d"),s("8a81"),s("5df3"),s("1c4c"),s("6b54"),s("7f7f"),s("55dd"),s("c5f6"),s("75fc")),o=(s("96cf"),s("3b8d")),i=(s("ac6a"),s("456d"),s("4ec4")),u=s("6ace");function r(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=c(e))){var t=0,s=function(){};return{s:s,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,n,l=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return l=e.done,e},e:function(e){o=!0,n=e},f:function(){try{l||null==a.return||a.return()}finally{if(o)throw n}}}}function c(e,t){if(e){if("string"===typeof e)return d(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(s):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,a=new Array(t);s<t;s++)a[s]=e[s];return a}var v={name:"consensus",data:function(){return{viewList:!0,myNodeLoading:!0,consensusActive:"consensusFirst",nodeTypeOptions:[{value:0,label:"0"},{value:1,label:"1"},{value:2,label:"2"}],nodeTypeRegion:0,nodeStatusOptions:[{value:0,label:"0"},{value:1,label:"1"},{value:2,label:"2"}],nodeStatusRegion:0,searchValue:"",allNodeData:[],allNodeLoading:!0,addressInfo:this.$store.getters.getSelectAddress,agentAsset:JSON.parse(sessionStorage.getItem("info")),isRed:!1,pageIndex:1,pageSize:500,pageTotal:0,myNodeData:[]}},components:{SelectBar:i["a"]},created:function(){},mounted:function(){this.getSelectAddressInfo(),this.getConsensusNodes(this.pageIndex,this.pageSize,this.nodeTypeRegion)},computed:{searchData:function(){var e=this.searchValue;return e?this.allNodeData.filter((function(t){return Object.keys(t).some((function(s){return String(t[s]).toLowerCase().indexOf(e.toLowerCase())>-1}))})):this.allNodeData},computeNodeType:function(){return[this.$t("nodeStatus.2"),this.$t("nodeStatus.1"),this.$t("nodeStatus.3")]}},watch:{"$store.getters.getSelectAddress":{handler:function(e,t){e.address!==t.address&&(this.addressInfo=this.$store.getters.getSelectAddress,this.getSelectAddressInfo())}}},methods:{getSelectAddressInfo:function(){this.myNodeData={},this.myNodeLoading=!0,this.getConsensusInfoByAddress(this.pageIndex,this.pageSize,this.addressInfo.address),this.getAddressInfoByNode(this.addressInfo),this.getPunishByAddress(this.addressInfo.address)},judgeNodeType:function(e,t){return e?this.computeNodeType[0]:t?this.computeNodeType[1]:this.computeNodeType[2]},getPunishByAddress:function(e){var t=this;this.$post("/","getPunishList",[1,1,2,e]).then((function(e){0!==e.result.list.length?t.isRed=!0:t.isRed=!1})).catch((function(e){t.$message({message:t.$t("public.err3")+e,type:"error",duration:1e3})}))},getAddressInfoByNode:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","getAccount",[t.address]).then((function(e){if(e.hasOwnProperty("result")){var a,n=Object(l["a"])(s.$store.state.addressInfo),o=r(n);try{for(o.s();!(a=o.n()).done;){var i=a.value;i.address===t.address&&(n.alias=e.result.alias,n.symbol=e.result.symbol,n.balance=Object(u["j"])(e.result.balance),n.consensusLock=Object(u["j"])(e.result.consensusLock),n.totalReward=Object(u["j"])(e.result.totalReward),e.result.lastReward?n.lastReward=Object(u["j"])(e.result.lastReward):n.lastReward=0,n.totalIn=Object(u["j"])(e.result.totalIn),n.totalOut=Object(u["j"])(e.result.totalOut))}}catch(c){o.e(c)}finally{o.f()}s.$store.commit("setAddressInfo",n)}})).catch((function(e){console.log("getAccount:"+e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getConsensusNodes:function(e,t,s){var a=this;this.allNodeLoading=!0,this.$post("/","getConsensusNodes",[e,t,s]).then((function(e){if(e.hasOwnProperty("result")){var t,s=r(e.result.list);try{for(s.s();!(t=s.n()).done;){var n=t.value;n.bozhengjin=n.deposit,n.deposit=Number(Object(u["j"])(n.deposit)).toFixed(3),n.totalDeposit=Number(Object(u["j"])(n.totalDeposit)).toFixed(3)}}catch(l){s.e(l)}finally{s.f()}a.allNodeData=e.result.list,a.allNodeLoading=!1}})).catch((function(e){console.log("getConsensusNodes:"+e)}))},getConsensusInfoByAddress:function(e,t,s){var a=this;this.$post("/","getAccountConsensusNode",[s]).then((function(e){e.hasOwnProperty("result")?(e.result.deposit=Number(Object(u["j"])(e.result.deposit)).toFixed(3),e.result.totalDeposit=Number(Object(u["j"])(e.result.totalDeposit)).toFixed(3),e.result.totalReward=Number(Object(u["j"])(e.result.totalReward)).toFixed(3),a.myNodeLoading=!1,a.myNodeData=e.result):a.myNodeLoading=!1})).catch((function(e){console.log("getAccountConsensus:"+e)}))},changeNodeStatus:function(e){this.nodeStatusRegion=e,this.getConsensusNodes(this.pageIndex,this.pageSize,this.nodeStatusRegion)},changeNodeType:function(e){switch(this.nodeTypeRegion=parseInt(e),e){case 1:this.nodeTypeSort(this.allNodeData,"creditValue");break;case 2:this.nodeTypeSort(this.allNodeData,"deposit");break;default:this.getConsensusNodes(this.pageIndex,this.pageSize,this.nodeStatusRegion)}},nodeTypeSort:function(e,t){var s=function(e){return function(t,s){var a=t[e],n=s[e];return isNaN(Number(a))||isNaN(Number(n))||(a=Number(a),n=Number(n)),a>n?-1:a<n?1:0}};return e.sort(s(t))},toUrl:function(e,t){var s={};s="consensusInfo"===e?{hash:t}:{consensusLock:t},this.$router.push({name:e,query:s})},copy:function(e){Object(u["h"])(e),this.$message({message:this.$t("public.copySuccess"),type:"success",duration:1e3})},handleClick:function(e){this.consensusActive=e.name}}},f=v,p=(s("64c7"),s("2877")),h=Object(p["a"])(f,a,n,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-a4f9c884.ee3e8221.js.map