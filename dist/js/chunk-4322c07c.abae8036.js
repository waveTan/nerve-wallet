(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4322c07c"],{"612c":function(e,r,s){},"7ffc":function(e,r,s){"use strict";var t=s("612c"),n=s.n(t);n.a},b483:function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"import-address"},[s("div",[s("el-tabs",{staticClass:"new_import w1200",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(r){e.activeName=r},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:e.$t("importAddress.importAddress2"),name:"keystoreImport",disabled:"0"!==e.resetAddress}},[s("div",{staticClass:"tc upload_keystore"},[e.isfileReader?s("div",[e._v(e._s(e.$t("importAddress.importAddress42")))]):s("el-upload",{staticClass:"upload",attrs:{drag:"",action:"localhost",accept:".keystore","before-upload":e.handleUpload,multiple:!1,limit:1}},[s("i",{staticClass:"el-icon-upload"}),s("div",{staticClass:"el-upload__text"},[e._v(e._s(e.$t("importAddress.importAddress4"))),s("em",[e._v(e._s(e.$t("importAddress.importAddress41")))])])])],1)]),s("el-tab-pane",{attrs:{label:e.$t("importAddress.importAddress3"),name:"keyImport"}},[s("div",{staticClass:"tab w1200 mt_30"},["0"!==e.resetAddress?s("div",{staticClass:"tc font18 mzt_20"},[e._v("\n            "+e._s(e.$t("public.resetAddress"))+": "+e._s(e.resetAddress)+"\n          ")]):e._e(),s("el-form",{ref:"importForm",staticClass:"import-form w630",attrs:{model:e.importForm,rules:e.importRules,"status-icon":""}},[s("el-form-item",{attrs:{label:e.$t("importAddress.importAddress5"),prop:"keys"}},[s("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.importForm.keys,callback:function(r){e.$set(e.importForm,"keys","string"===typeof r?r.trim():r)},expression:"importForm.keys"}})],1),s("el-form-item",{attrs:{label:e.$t("newAddress.newAddress6"),prop:"pass"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.importForm.pass,callback:function(r){e.$set(e.importForm,"pass",r)},expression:"importForm.pass"}})],1),s("el-form-item",{attrs:{label:e.$t("newAddress.newAddress7"),prop:"checkPass"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.importForm.checkPass,callback:function(r){e.$set(e.importForm,"checkPass",r)},expression:"importForm.checkPass"}})],1),s("el-form-item",{staticClass:"form-bnt"},[s("el-button",{attrs:{type:"success"},on:{click:function(r){return e.keyImport("importForm")}}},[e._v(e._s(e.$t("importAddress.importAddress8"))+"\n              ")])],1)],1)],1)]),e._e(),s("el-tab-pane",{attrs:{label:e.$t("importAddress.importAddress0"),name:"newAddress",disabled:"0"!==e.resetAddress}},[s("div",{staticClass:"new_address"},[s("el-form",{ref:"newAddressForm",staticClass:"w630",attrs:{model:e.newAddressForm,"status-icon":"",rules:e.newAddressRules}},[s("el-form-item",{attrs:{label:e.$t("newAddress.newAddress6"),prop:"pass"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.newAddressForm.pass,callback:function(r){e.$set(e.newAddressForm,"pass",r)},expression:"newAddressForm.pass"}})],1),s("el-form-item",{attrs:{label:e.$t("newAddress.newAddress7"),prop:"checkPass"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.newAddressForm.checkPass,callback:function(r){e.$set(e.newAddressForm,"checkPass",r)},expression:"newAddressForm.checkPass"}})],1),s("el-form-item",{attrs:{label:"",prop:"agreement"}},[s("el-checkbox-group",{model:{value:e.newAddressForm.agreement,callback:function(r){e.$set(e.newAddressForm,"agreement",r)},expression:"newAddressForm.agreement"}},[s("el-checkbox",{attrs:{label:e.$t("newAddress.newAddress8"),name:"agreement"}})],1)],1),s("el-form-item",{staticClass:"form-bnt"},[s("el-button",{attrs:{type:"success"},on:{click:function(r){return e.newAddressSubmitForm("newAddressForm")}}},[e._v("\n                "+e._s(e.$t("importAddress.importAddress0"))+"\n              ")])],1)],1)],1)])],1)],1),s("Password",{ref:"password",on:{passwordSubmit:e.keystoreImportPassSubmit}})],1)},n=[],a=(s("ac6a"),s("c5f6"),s("7f7f"),s("96cf"),s("3b8d")),o=s("bc9e"),d=s.n(o),i=s("d044"),c=s.n(i),l=s("6ace"),m=s("1959"),p=s("d1f0"),u={data:function(){var e=this,r=function(r,s,t){""===s?t(new Error(e.$t("importAddress.importAddress9"))):s.length<60||s.length>66?t(new Error(e.$t("importAddress.importAddress91"))):t()},s=function(r,s,t){var n=/^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{8,20}$/;""===s?t(new Error(e.$t("newAddress.newAddress22"))):n.exec(s)?(""!==e.importForm.checkPass&&e.$refs.importForm.validateField("validateCheckPass"),t()):t(new Error(e.$t("newAddress.newAddress23")))},t=function(r,s,t){""===s?t(new Error(e.$t("newAddress.newAddress24"))):s!==e.importForm.pass?t(new Error(e.$t("newAddress.newAddress25"))):t()},n=function(r,s,t){var n=/^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{8,20}$/;""===s?t(new Error(e.$t("newAddress.newAddress22"))):n.exec(s)?(""!==e.newAddressForm.checkPass&&e.$refs.newAddressForm.validateField("validateNewCheckPass"),t()):t(new Error(e.$t("newAddress.newAddress23")))},a=function(r,s,t){""===s?t(new Error(e.$t("newAddress.newAddress24"))):s!==e.newAddressForm.pass?t(new Error(e.$t("newAddress.newAddress25"))):t()},o=function(r,s,t){s?t():t(new Error(e.$t("newAddress.newAddress29")))};return{activeName:"keystoreImport",prefix:"",isfileReader:"undefined"===typeof FileReader,keystoreInfo:{},resetAddress:this.$route.query.address?this.$route.query.address:"0",importForm:{keys:"",pass:"",checkPass:""},importRules:{keys:[{validator:r,trigger:"blur"}],pass:[{validator:s,trigger:"blur"}],checkPass:[{validator:t,trigger:"blur"}]},importAddressInfo:{},importRandomString:"",newAddressForm:{pass:"",checkPass:"",agreement:!1},newAddressRules:{pass:[{validator:n,trigger:"blur"}],checkPass:[{validator:a,trigger:"blur"}],agreement:[{validator:o,trigger:"blur"}]},newAddressInfo:{},scanImportInterval:null}},components:{Password:p["a"]},created:function(){var e=this;Object(m["e"])(Object(l["e"])()).then((function(r){e.prefix=r})).catch((function(r){console.log(r),e.prefix=""})),this.activeName="0"!==this.resetAddress?"keyImport":"keystoreImport"},mounted:function(){},beforeDestroy:function(){clearInterval(this.scanImportInterval)},methods:{ramNumber:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.importRandomString){e.next=4;break}return e.next=3,Object(l["l"])(16);case 3:this.importRandomString=e.sent;case 4:r={url:localStorage.hasOwnProperty("url")?JSON.parse(localStorage.getItem("url")).urls:"https://beta.wallet.nuls.io/api",send:this.importRandomString},s=new c.a("qrcode",{width:250,height:250,colorDark:"#000000",colorLight:"#ffffff"}),s.makeCode(JSON.stringify(r));case 7:case"end":return e.stop()}}),e,this)})));function r(){return e.apply(this,arguments)}return r}(),handleClick:function(e){var r=this;"keystoreImport"===e.name?(this.importAddressInfo={},this.newAddressInfo={},this.$refs["importForm"].resetFields(),this.$refs["newAddressForm"].resetFields()):"keyImport"===e.name?(this.keystoreInfo={},this.newAddressInfo={},this.$refs["newAddressForm"].resetFields()):"scanImport"===e.name?this.scanImportInterval=setInterval((function(){r.getScanImport(r.importRandomString)}),3e3):(this.keystoreInfo={},this.importAddressInfo={},this.$refs["importForm"].resetFields())},getScanImport:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r){var s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","getMsg",[r]).then((function(e){if(e.hasOwnProperty("result")){var r={address:e.result.address,aesPri:"",pub:""};s.getAddressInfo(r)}})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));function r(r){return e.apply(this,arguments)}return r}(),getAddressInfo:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r){var s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","getAccountLedgerList",[r.address]).then((function(e){var t={address:r.address,aesPri:r.aesPri,pub:r.pub,remark:""};e.hasOwnProperty("result")?(t.account=e.result[0].symbol,t.chainId=e.result[0].chainId,t.assetId=e.result[0].assetId,t.type=1,t.balance=Number(Object(l["r"])(e.result[0].balance)).toFixed(3),t.locking=Number(Object(l["r"])(Object(l["c"])(e.result[0].consensusLock,e.result[0].timeLock))).toFixed(3),t.total=0!==e.result[0].totalBalance?Number(Object(l["r"])(e.result[0].totalBalance)).toFixed(3):0):(t.account=e.result.symbol,t.chainId=e.result.chainId,t.assetId=e.result.assetId,t.type=1,t.total=0,t.locking=0,t.balance=0);var n=Object(l["o"])(t);s.$store.commit("setAddressInfo",n),s.toUrl("address")}));case 2:case"end":return e.stop()}}),e,this)})));function r(r){return e.apply(this,arguments)}return r}(),handleUpload:function(e){var r=this,s=new FileReader;s.addEventListener("load",(function(){r.keystoreInfo=JSON.parse(s.result),r.keystoreInfo.pub=r.keystoreInfo.pubKey,r.keystoreInfo.aesPri=r.keystoreInfo.encryptedPrivateKey,r.$refs.password.showPassword(!0)})),s.readAsText(e,"utf-8")},keystoreImportPassSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r){var s,t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=Object(l["p"])(this.keystoreInfo,r,this.prefix),s.success?(t=l["i"],t.address=s.address,t.aesPri=s.aesPri,t.pub=s.pub,n=Object(l["o"])(t),this.$store.commit("setAddressInfo",n),this.toUrl("address")):this.$message({message:this.$t("address.address13"),type:"error",duration:3e3});case 2:case"end":return e.stop()}}),e,this)})));function r(r){return e.apply(this,arguments)}return r}(),keyImport:function(e){var r=this;this.$refs[e].validate(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(s){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!s){e.next=11;break}t=d.a.importByKey(Object(l["e"])(),r.importForm.keys,r.importForm.pass,r.prefix),n=l["i"],n.address=t.address,n.aesPri=t.aesPri,n.pub=t.pub,a=Object(l["o"])(n),r.$store.commit("setAddressInfo",a),r.toUrl("address"),e.next=12;break;case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())},newAddressSubmitForm:function(e){var r=this;this.$refs[e].validate(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(s){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!s){e.next=11;break}r.newAddressInfo=d.a.newAddress(Object(l["e"])(),r.newAddressForm.pass,r.prefix),t=l["i"],t.address=r.newAddressInfo.address,t.aesPri=r.newAddressInfo.aesPri,t.pub=r.newAddressInfo.pub,n=Object(l["o"])(t),r.$store.commit("setAddressInfo",n),r.$router.push({name:"backupsAddress",query:{backAddressInfo:t.address}}),e.next=12;break;case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())},toUrl:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;0===r?this.$router.push({name:e}):Object(l["g"])("nuls",e)}}},f=u,w=(s("7ffc"),s("2877")),h=Object(w["a"])(f,t,n,!1,null,null,null);r["default"]=h.exports}}]);
//# sourceMappingURL=chunk-4322c07c.abae8036.js.map