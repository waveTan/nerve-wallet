(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b52345b"],{2209:function(e,t,n){},"2f21":function(e,t,n){"use strict";var s=n("79e5");e.exports=function(e,t){return!!e&&s((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},"2fdb":function(e,t,n){"use strict";var s=n("5ca1"),a=n("d2c8"),o="includes";s(s.P+s.F*n("5147")(o),"String",{includes:function(e){return!!~a(this,e,o).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"4f7f":function(e,t,n){"use strict";var s=n("c26b"),a=n("b39a"),o="Set";e.exports=n("e0b8")(o,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return s.def(a(this,o),e=0===e?0:e,e)}},s)},5147:function(e,t,n){var s=n("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[s]=!1,!"/./"[e](t)}catch(a){}}return!0}},"55dd":function(e,t,n){"use strict";var s=n("5ca1"),a=n("d8e8"),o=n("4bf8"),i=n("79e5"),l=[].sort,r=[1,2,3];s(s.P+s.F*(i((function(){r.sort(void 0)}))||!i((function(){r.sort(null)}))||!n("2f21")(l)),"Array",{sort:function(e){return void 0===e?l.call(o(this)):l.call(o(this),a(e))}})},"64c7":function(e,t,n){"use strict";var s=n("2209"),a=n.n(s);a.a},6762:function(e,t,n){"use strict";var s=n("5ca1"),a=n("c366")(!0);s(s.P,"Array",{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},aae3:function(e,t,n){var s=n("d3f4"),a=n("2d95"),o=n("2b4c")("match");e.exports=function(e){var t;return s(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==a(e))}},b39a:function(e,t,n){var s=n("d3f4");e.exports=function(e,t){if(!s(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},c26b:function(e,t,n){"use strict";var s=n("86cc").f,a=n("2aeb"),o=n("dcbc"),i=n("9b43"),l=n("f605"),r=n("4a59"),c=n("01f9"),u=n("d53b"),d=n("7a56"),f=n("9e1e"),v=n("67ab").fastKey,h=n("b39a"),p=f?"_s":"size",b=function(e,t){var n,s=v(t);if("F"!==s)return e._i[s];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var u=e((function(e,s){l(e,u,t,"_i"),e._t=t,e._i=a(null),e._f=void 0,e._l=void 0,e[p]=0,void 0!=s&&r(s,n,e[c],e)}));return o(u.prototype,{clear:function(){for(var e=h(this,t),n=e._i,s=e._f;s;s=s.n)s.r=!0,s.p&&(s.p=s.p.n=void 0),delete n[s.i];e._f=e._l=void 0,e[p]=0},delete:function(e){var n=h(this,t),s=b(n,e);if(s){var a=s.n,o=s.p;delete n._i[s.i],s.r=!0,o&&(o.n=a),a&&(a.p=o),n._f==s&&(n._f=a),n._l==s&&(n._l=o),n[p]--}return!!s},forEach:function(e){h(this,t);var n,s=i(e,arguments.length>1?arguments[1]:void 0,3);while(n=n?n.n:this._f){s(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function(e){return!!b(h(this,t),e)}}),f&&s(u.prototype,"size",{get:function(){return h(this,t)[p]}}),u},def:function(e,t,n){var s,a,o=b(e,t);return o?o.v=n:(e._l=o={i:a=v(t,!0),k:t,v:n,p:s=e._l,n:void 0,r:!1},e._f||(e._f=o),s&&(s.n=o),e[p]++,"F"!==a&&(e._i[a]=o)),e},getEntry:b,setStrong:function(e,t,n){c(e,t,(function(e,n){this._t=h(e,t),this._k=n,this._l=void 0}),(function(){var e=this,t=e._k,n=e._l;while(n&&n.r)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?u(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,u(1))}),n?"entries":"values",!n,!0),d(t)}}},c5cc:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"consensus w1200"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.myNodeLoading,expression:"myNodeLoading"}],staticClass:"my-node shadow1"},[n("div",{staticClass:"head"},[n("h3",{staticClass:"fl"},[e._v(e._s(e.$t("consensus.consensus11")))]),e.myNodeData.length?n("div",{staticClass:"node-info fl"},[n("ul",[n("li",{staticClass:"uppercase"},[e._v("ID: "+e._s(e.myNodeData[0].agentId))]),n("li",[e._v(e._s(e.$t("public.alias"))+": "+e._s(e.myNodeData[0].alias||"-"))]),n("li",[e._v(e._s(e.$t("consensus.consensus12"))+": "+e._s(e.myNodeData[0].type))])])]):e._e(),e.myNodeData.length?n("div",{staticClass:"to-node-detail click fCN fr",on:{click:function(t){return e.toUrl("consensusInfo",e.myNodeData[0].txHash)}}},[e._v("\n        "+e._s(e.$t("consensus.consensus13"))+"\n      ")]):e._e()]),n("div",{staticClass:"body"},[e.myNodeData.length?n("div",{staticClass:"exist-node"},[n("div",[e._v(e._s(e.$t("consensus.consensus14"))),n("p",[e._v(e._s(e.myNodeData[0].totalDeposit+" NVT"))])]),n("div",[e._v(e._s(e.$t("consensus.consensus15"))),n("p",[e._v(e._s(e.myNodeData[0].rank))])]),n("div",[e._v(e._s(e.$t("consensus.consensus16"))),n("p",[e._v(e._s(e.myNodeData[0].totalReward))])]),n("div",[e._v(e._s(e.$t("public.credit"))),n("p",[e._v(e._s(e.myNodeData[0].creditValue))])])]):n("div",{staticClass:"create-node"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.toUrl("newConsensus")}}},[e._v(e._s(e.$t("newConsensus.newConsensus0")))])],1)])]),n("el-tabs",{staticClass:"tab-list",on:{"tab-click":e.handleClick},model:{value:e.consensusActive,callback:function(t){e.consensusActive=t},expression:"consensusActive"}},[n("el-tab-pane",{attrs:{label:e.$t("consensus.consensus9"),name:"consensusFirst"}},[n("div",{staticClass:"filter"},[n("SelectBar",{attrs:{typeOptions:e.nodeTypeOptions,typeName:"nodeType"},on:{change:e.changeNodeType},model:{value:e.nodeTypeRegion,callback:function(t){e.nodeTypeRegion=t},expression:"nodeTypeRegion"}}),n("SelectBar",{attrs:{typeOptions:e.nodeStatusOptions,typeName:"nodeStatus"},on:{change:e.changeNodeStatus},model:{value:e.nodeStatusRegion,callback:function(t){e.nodeStatusRegion=t},expression:"nodeStatusRegion"}}),n("el-input",{staticClass:"search",attrs:{placeholder:e.$t("consensus.consensus10"),"suffix-icon":"el-icon-search"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[n("i",{staticClass:"iconfont icon-search_icon fr click"})]),n("i",{staticClass:"fr click",class:e.viewList?"el-icon-s-unfold":"el-icon-menu",on:{click:function(t){e.viewList=!e.viewList}}})],1),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.allNodeLoading,expression:"allNodeLoading"},{name:"show",rawName:"v-show",value:e.viewList,expression:"viewList"}],staticClass:"node"},[e._l(e.searchData,(function(t){return n("div",{key:t.agentId,staticClass:"node_info shadow1"},[n("h4",[n("span",{staticClass:"uppercase fCN"},[e._v(e._s(t.agentId))]),e._v(" \n            "),n("i",{staticClass:"iconfont fr",class:0===t.status?"icondaigongshi fred":"icongongshizhong fCN"})]),n("ul",{staticClass:"bg-white click",on:{click:function(n){return e.toUrl("consensusInfo",t.txHash)}}},[n("li",[e._v(e._s(e.$t("public.alias"))),n("span",[e._v(e._s(t.agentAlias))])]),n("li",[e._v(e._s(e.$t("consensus.consensus12"))),n("span",[e._v(e._s("虚拟银行"))])]),n("li",[e._v(e._s(e.$t("public.totalStake"))),n("span",[e._v(e._s(t.totalDeposit)),n("font",{staticClass:"fCN"},[e._v(" NVT")])],1)]),n("li",[e._v(e._s(e.$t("public.credit"))),n("span",[e._v(e._s(t.creditValue))])])])])})),n("div",{staticClass:"cb"})],2),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.viewList,expression:"!viewList"},{name:"loading",rawName:"v-loading",value:e.allNodeLoading,expression:"allNodeLoading"}],staticClass:"c_tabs"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.searchData,stripe:"",border:""}},[n("el-table-column",{attrs:{label:"",width:"80"}}),n("el-table-column",{attrs:{label:"ID","min-width":"150",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"cursor-p click uppercase",on:{click:function(n){return e.toUrl("consensusInfo",t.row.txHash)}}},[e._v(e._s(t.row.agentId))])]}}])}),n("el-table-column",{attrs:{label:e.$t("public.alias"),"min-width":"150",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.agentAlias?t.row.agentAlias:"-"))])]}}])}),n("el-table-column",{attrs:{prop:"creditValue",label:e.$t("public.credit"),"min-width":"150"}}),n("el-table-column",{attrs:{label:e.$t("public.totalStake")+"("+e.symbol+")","min-width":"150",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"cursor-p click uppercase",on:{click:function(n){return e.toUrl("consensusInfo",t.row.txHash,"three")}}},[e._v(e._s(t.row.totalDeposit))])]}}])}),n("el-table-column",{attrs:{label:e.$t("consensus.consensus12"),"min-width":"150",align:"left"}})],1)],1)])],1)],1)},a=[],o=(n("ac4d"),n("8a81"),n("1c4c"),n("6b54"),n("7f7f"),n("55dd"),n("75fc")),i=(n("5df3"),n("4f7f"),n("c5f6"),n("6762"),n("2fdb"),n("96cf"),n("3b8d")),l=(n("ac6a"),n("456d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-select",{attrs:{value:e.$t(e.typeName+"."+e.value)},on:{input:function(t){return e.change(t)}}},e._l(e.typeOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:e.$t(e.typeName+"."+t.label),value:t.value}})})),1)}),r=[],c={props:{value:{default:0},typeOptions:{type:Array,default:function(){return[{value:"0",label:"0"},{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"},{value:"13",label:"13"},{value:"14",label:"14"},{value:"15",label:"15"},{value:"16",label:"16"},{value:"17",label:"17"},{value:"18",label:"18"},{value:"19",label:"19"},{value:"20",label:"20"},{value:"21",label:"21"},{value:"22",label:"22"},{value:"23",label:"23"},{value:"24",label:"24"},{value:"25",label:"25"}]}},typeName:{type:String,default:"type"}},methods:{change:function(e){this.$emit("change",e)}}},u=c,d=n("2877"),f=Object(d["a"])(u,l,r,!1,null,null,null),v=f.exports,h=n("6ace");function p(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=b(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a,o=!0,i=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==s.return||s.return()}finally{if(i)throw a}}}}function b(e,t){if(e){if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var y={name:"consensus",data:function(){return{viewList:!0,myNodeLoading:!0,consensusActive:"consensusFirst",nodeCount:{agentCount:0,totalCount:0},nulsCount:{consensusTotal:0},nodeTypeOptions:[{value:0,label:"0"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],nodeTypeRegion:0,nodeStatusOptions:[{value:0,label:"0"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"}],nodeStatusRegion:0,searchValue:"",allNodeData:[],allNodeLoading:!0,addressInfo:[],agentAsset:JSON.parse(sessionStorage.getItem("info")),isRed:!1,isNew:!1,pageIndex:1,pageSize:500,pageTotal:0,myNodeData:[],setInterval:null}},components:{SelectBar:v},created:function(){var e=this;this.addressInfo=Object(h["e"])(1),setInterval((function(){e.addressInfo=Object(h["e"])(1)}),500)},mounted:function(){var e=this;setTimeout((function(){e.getConsensusNodes(e.pageIndex,e.pageSize,e.nodeTypeRegion),e.getConsensusInfoByAddress(e.pageIndex,e.pageSize,e.addressInfo.address),e.getAddressInfoByNode(e.addressInfo),e.getPunishByAddress(e.addressInfo.address)}),600)},destroyed:function(){clearInterval(this.setInterval)},computed:{searchData:function(){var e=this.searchValue;return e?this.allNodeData.filter((function(t){return Object.keys(t).some((function(n){return String(t[n]).toLowerCase().indexOf(e.toLowerCase())>-1}))})):this.allNodeData}},watch:{addressInfo:function(e,t){e.address!==t.address&&t.address&&(this.isNew=!1,this.getPunishByAddress(this.addressInfo.address),this.getConsensusNodes(this.pageIndex,this.pageSize,this.nodeTypeRegion),this.getConsensusInfoByAddress(this.pageIndex,this.pageSize,this.addressInfo.address))}},methods:{getPunishByAddress:function(e){var t=this;this.$post("/","getPunishList",[1,1,2,e]).then((function(e){0!==e.result.list.length?t.isRed=!0:t.isRed=!1})).catch((function(e){t.$message({message:t.$t("public.err3")+e,type:"error",duration:1e3})}))},getAddressInfoByNode:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","getAccount",[t.address]).then((function(e){if(e.hasOwnProperty("result")){var n,s=Object(h["e"])(0),a=p(s);try{for(a.s();!(n=a.n()).done;){var o=n.value;o.address===t.address&&(s.alias=e.result.alias,s.symbol=e.result.symbol,s.balance=Object(h["k"])(e.result.balance),s.consensusLock=Object(h["k"])(e.result.consensusLock),s.totalReward=Object(h["k"])(e.result.totalReward),e.result.lastReward?s.lastReward=Object(h["k"])(e.result.lastReward):s.lastReward=0,s.totalIn=Object(h["k"])(e.result.totalIn),s.totalOut=Object(h["k"])(e.result.totalOut))}}catch(i){a.e(i)}finally{a.f()}localStorage.setItem(Object(h["g"])(),JSON.stringify(s))}})).catch((function(e){console.log("getAccount:"+e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getConsensusNodeCount:function(){var e=this;this.$post("/","getConsensusNodeCount",[]).then((function(t){t.hasOwnProperty("result")?e.nodeCount=t.result:(e.nodeCount.agentCount=0,e.nodeCount.totalCount=0)})).catch((function(t){e.nodeCount.agentCount=0,e.nodeCount.totalCount=0,console.log("getConsensusNodeCount:"+t)}))},getCoinInfo:function(){var e=this;this.$post("/","getCoinInfo",[]).then((function(t){t.hasOwnProperty("result")?(e.nulsCount.circulation=Object(h["k"])(t.result.circulation),e.nulsCount.consensusTotal=Object(h["k"])(t.result.consensusTotal),e.nulsCount.total=Object(h["k"])(t.result.total)):(e.nulsCount.circulation=0,e.nulsCount.consensusTotal=0,e.nulsCount.total=0)})).catch((function(t){e.nulsCount.circulation=0,e.nulsCount.consensusTotal=0,e.nulsCount.total=0,console.log("getCoinInfo:"+t)}))},getConsensusNodes:function(e,t,n){var s=this;this.allNodeLoading=!0,this.$post("/","getConsensusNodes",[e,t,n]).then((function(e){if(e.hasOwnProperty("result")){s.addressInfo.collectList||(s.addressInfo.collectList=[]);var t,n=p(e.result.list);try{for(n.s();!(t=n.n()).done;){var a=t.value;s.addressInfo.collectList.includes(a.agentId)?a.isCollect=!0:a.isCollect=!1,a.bozhengjin=a.deposit,a.deposit=Number(Object(h["k"])(a.deposit)).toFixed(3),a.agentReward=Number(Object(h["k"])(a.agentReward)).toFixed(3),a.totalDeposit=Number(Object(h["k"])(a.totalDeposit)).toFixed(3),a.totalReward=Number(Object(h["k"])(a.totalReward)).toFixed(3),a.agentAddress===s.addressInfo.address?s.isNew=!0:s.isNew=!1}}catch(o){n.e(o)}finally{n.f()}s.allNodeData=e.result.list,s.allNodeLoading=!1}})).catch((function(e){console.log("getConsensusNodes:"+e)}))},getConsensusInfoByAddress:function(e,t,n){var s=this;this.$post("/","getAccountConsensus",[e,t,n]).then((function(e){if(e.hasOwnProperty("result")){var t,n=[],a=p(e.result.list);try{for(a.s();!(t=a.n()).done;){var i=t.value;s.addressInfo.collectList||(s.addressInfo.collectList=[]),s.addressInfo.collectList.includes(i.agentId)?i.isCollect=!0:i.isCollect=!1,n.push(i.agentId),i.deposit=Number(Object(h["k"])(i.deposit)).toFixed(3),i.totalDeposit=Number(Object(h["k"])(i.totalDeposit)).toFixed(3),i.totalReward=Number(Object(h["k"])(i.totalReward)).toFixed(3),i.agentAddress===s.addressInfo.address?(i.isNew=!0,s.isNew=!0):(i.isNew=!1,s.isNew=!1)}}catch(b){a.e(b)}finally{a.f()}var l,r=new Set(n),c=new Set(s.addressInfo.collectList),u=new Set(Object(o["a"])(c).filter((function(e){return!r.has(e)}))),d=[],f=p(u);try{var v=function(){var e=l.value;d.push(s.allNodeData.filter((function(t){return t.agentId===e}))[0])};for(f.s();!(l=f.n()).done;)v()}catch(b){f.e(b)}finally{f.f()}s.myNodeLoading=!1,s.myNodeData=[].concat(Object(o["a"])(e.result.list),d)}})).catch((function(e){console.log("getAccountConsensus:"+e)}))},changeNodeStatus:function(e){this.nodeStatusRegion=e,this.getConsensusNodes(this.pageIndex,this.pageSize,this.nodeStatusRegion)},changeNodeType:function(e){switch(this.nodeTypeRegion=parseInt(e),e){case 1:this.nodeTypeSort(this.allNodeData,"creditValue");break;case 2:this.nodeTypeSort(this.allNodeData,"commissionRate");break;case 3:this.nodeTypeSort(this.allNodeData,"totalDeposit");break;case 4:this.nodeTypeSort(this.allNodeData,"bozhengjin");break;default:this.getConsensusNodes(this.pageIndex,this.pageSize,this.nodeStatusRegion)}},nodeTypeSort:function(e,t){var n=function(e){return function(t,n){var s=t[e],a=n[e];return isNaN(Number(s))||isNaN(Number(a))||(s=Number(s),a=Number(a)),s>a?-1:s<a?1:0}};return e.sort(n(t))},toUrl:function(e,t){var n={};n="consensusInfo"===e?{hash:t}:{consensusLock:t},this.$router.push({name:e,query:n})},copy:function(e){Object(h["i"])(e),this.$message({message:this.$t("public.copySuccess"),type:"success",duration:1e3})},handleClick:function(e){this.consensusActive=e.name}}},_=y,m=(n("64c7"),Object(d["a"])(_,s,a,!1,null,null,null));t["default"]=m.exports},d2c8:function(e,t,n){var s=n("aae3"),a=n("be13");e.exports=function(e,t,n){if(s(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(a(e))}},e0b8:function(e,t,n){"use strict";var s=n("7726"),a=n("5ca1"),o=n("2aba"),i=n("dcbc"),l=n("67ab"),r=n("4a59"),c=n("f605"),u=n("d3f4"),d=n("79e5"),f=n("5cc5"),v=n("7f20"),h=n("5dbc");e.exports=function(e,t,n,p,b,g){var y=s[e],_=y,m=b?"set":"add",w=_&&_.prototype,N={},C=function(e){var t=w[e];o(w,e,"delete"==e||"has"==e?function(e){return!(g&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof _&&(g||w.forEach&&!d((function(){(new _).entries().next()})))){var k=new _,I=k[m](g?{}:-0,1)!=k,S=d((function(){k.has(1)})),O=f((function(e){new _(e)})),x=!g&&d((function(){var e=new _,t=5;while(t--)e[m](t,t);return!e.has(-0)}));O||(_=t((function(t,n){c(t,_,e);var s=h(new y,t,_);return void 0!=n&&r(n,b,s[m],s),s})),_.prototype=w,w.constructor=_),(S||x)&&(C("delete"),C("has"),b&&C("get")),(x||I)&&C(m),g&&w.clear&&delete w.clear}else _=p.getConstructor(t,e,b,m),i(_.prototype,n),l.NEED=!0;return v(_,e),N[e]=_,a(a.G+a.W+a.F*(_!=y),N),g||p.setStrong(_,e,b),_}}}]);
//# sourceMappingURL=chunk-2b52345b.e6fa8412.js.map