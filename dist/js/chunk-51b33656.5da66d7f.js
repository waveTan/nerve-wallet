(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51b33656"],{"2e64":function(e,s,t){"use strict";var n=t("ff03"),a=t.n(n);a.a},"45e9":function(e,s,t){"use strict";var n=t("90c8"),a=t.n(n);a.a},"90c8":function(e,s,t){},a475:function(e,s,t){"use strict";t.r(s);var n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"consensus_info w1200"},[t("div",{staticClass:"bg-white"},[t("div",{staticClass:"w1200"},[t("BackBar",{attrs:{backTitle:e.$t("nav.consensus")}})],1)]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.nodeInfoLoading,expression:"nodeInfoLoading"}],staticClass:"node-info shadow1"},[t("div",{staticClass:"head"},[t("h3",{staticClass:"fCN fl uppercase"},[e._v("ID: "+e._s(e.nodeInfo.agentId))]),t("span",{class:["fr",1===e.nodeInfo.status?"resolve":"fred"]},[e._v(e._s(1===e.nodeInfo.status?e.$t("consensus.consensus21"):e.$t("consensus.consensus22")))])]),t("div",{staticClass:"body clear"},[t("div",{staticClass:"left-part"},[t("p",[e._v(e._s(e.$t("consensusInfo.consensusInfo8"))+" "),t("label",[e._v(e._s(e.nodeInfo.agentAlias?e.nodeInfo.agentAlias:"-"))])]),t("p",[e._v(e._s(e.$t("public.createAddress"))+" "),t("label",[e._v(e._s(e.nodeInfo.agentAddress))])]),t("p",[e._v(e._s(e.$t("public.rewardAddress"))+" "),t("label",[e._v(e._s(e.nodeInfo.rewardAddress))])]),t("p",[e._v(e._s(e.$t("public.packingAddress"))+" "),t("label",[e._v(e._s(e.nodeInfo.packingAddress))])]),t("p",[e._v(e._s(e.$t("consensus.consensus12"))+" "),t("label",[e._v(e._s(e.judgeNodeType(e.nodeInfo.bankNode,e.nodeInfo.status)))])])]),t("div",{staticClass:"right-part"},[t("p",[e._v(e._s(e.$t("public.credit"))+" "),t("label",[e._v(e._s(e.nodeInfo.creditValue))])]),t("p",[e._v(e._s(e.$t("public.deposit"))+" "),t("label",[e._v(e._s(e.nodeInfo.deposits)),t("span",{staticClass:"fCN"},[e._v(" "+e._s(e.agentAsset.agentAsset.symbol))])])]),t("p",[e._v(e._s(e.$t("consensusInfo.consensusInfo9"))+" "),t("label",[e._v(e._s(e.nodeInfo.createTime))])]),t("p",[e._v("\n          "+e._s(e.$t("consensusInfo.consensusInfo7"))+"\n          "),t("label",[e._v(e._s(e.nodeInfo.reward)),t("span",{staticClass:"fCN"},[e._v(" "+e._s(e.agentAsset.agentAsset.symbol))])])]),t("p",[e._v("\n          "+e._s(e.$t("consensusInfo.consensusInfo10"))+"\n          "),t("label",[t("u",{staticClass:"click td",on:{click:function(s){return e.toUrl("consensusInfo",e.nodeInfo.txHash)}}},[e._v("\n              "+e._s(e.nodeInfo.yellowCardCount)+e._s(e.$t("consensusInfo.consensusInfo11"))+"\n            ")])])]),e.addressInfo.address===e.nodeInfo.agentAddress?t("el-button",{staticClass:"fr",attrs:{type:"danger"},on:{click:e.stopNode}},[e._v("\n          "+e._s(e.$t("consensusInfo.consensusInfo5"))+"\n        ")]):e._e()],1)])]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.nodeDepositLoading,expression:"nodeDepositLoading"}],staticClass:"entrust-list"},[t("div",{staticClass:"head"},[e._v("\n      "+e._s(e.$t("public.total"))+" "+e._s(e.pageTotal+" "+e.$t("public.item")+" "+e.$t("consensus.consensus18"))+",\n      "+e._s(e.$t("consensus.consensus19")+" "+e.nodeInfo.deposits+" "+e.agentAsset.agentAsset.symbol)+",\n      "+e._s(e.$t("consensus.consensus16")+" "+e.nodeInfo.reward+" "+e.agentAsset.agentAsset.symbol)+"\n      "),e.addressInfo.address===e.nodeInfo.agentAddress?t("el-button",{staticClass:"fr",attrs:{type:"danger"},on:{click:e.quit}},[e._v("\n        "+e._s(e.$t("consensusInfo.consensusInfo0"))+"\n      ")]):e._e(),e.addressInfo.address===e.nodeInfo.agentAddress?t("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:e.addition}},[e._v("\n        "+e._s(e.$t("consensus.consensus20"))+"\n      ")]):e._e()],1),t("el-table",{staticClass:"shadow1",attrs:{data:e.nodeDepositData,stripe:"",border:""}},[t("el-table-column",{attrs:{width:"30"}}),t("el-table-column",{attrs:{prop:"blockHeight",label:e.$t("public.height"),width:"120"}}),t("el-table-column",{attrs:{label:"TXID","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",{staticClass:"click ",on:{click:function(t){return e.toUrl("transferInfo",s.row.txHash)}}},[e._v(e._s(s.row.txHashs))])]}}])}),t("el-table-column",{attrs:{prop:"amount",label:e.$t("public.deposit")+" ("+e.prefix+")","min-width":"70"}}),t("el-table-column",{attrs:{prop:"",label:e.$t("consensus.consensus16")+" ("+e.prefix+")","min-width":"80"}}),t("el-table-column",{attrs:{prop:"createTime",label:e.$t("public.time"),"min-width":"90"}}),t("el-table-column",{attrs:{label:e.$t("public.status"),"min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(s){return[e._v(e._s(1===s.row.type?e.$t("consensusInfo.consensusInfo13"):e.$t("consensusInfo.consensusInfo14"))+"\n        ")]}}])})],1),t("div",{staticClass:"pages"},[t("div",{staticClass:"page-total"},[e._v("\n        "+e._s(e.$t("public.display"))+" "+e._s(e.pageIndex-1===0?1:(e.pageIndex-1)*e.pageSize)+"-"+e._s(e.pageIndex*e.pageSize)+"\n        "+e._s(e.$t("public.total"))+" "+e._s(e.pageTotal)+"\n      ")]),t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.pageTotal>e.pageSize,expression:"pageTotal>pageSize"}],staticClass:"fr",attrs:{background:"","page-size":e.pageSize,layout:" prev, pager, next, jumper",total:e.pageTotal},on:{"current-change":e.nodeDepositPages}})],1),t("el-dialog",{staticClass:"form-dialog",attrs:{title:1===e.operateType?e.$t("consensus.consensus20"):e.$t("consensusInfo.consensusInfo0"),visible:e.additionDialog,width:"38rem"},on:{"update:visible":function(s){e.additionDialog=s}}},[t("el-form",{ref:"jionNodeForm",attrs:{model:e.jionNodeForm,"status-icon":"",rules:e.jionNodeRules}},[t("el-form-item",{attrs:{label:1===e.operateType?e.$t("consensusInfo.consensusInfo1"):e.$t("consensusInfo.consensusInfo15")+": ",prop:"amount"}},[1===e.operateType?t("span",{staticClass:"balance font12 fr"},[e._v(e._s(e.$t("consensus.consensus2"))+"："+e._s(e.balanceInfo.balance/1e8))]):e._e(),t("el-input",{model:{value:e.jionNodeForm.amount,callback:function(s){e.$set(e.jionNodeForm,"amount",s)},expression:"jionNodeForm.amount"}})],1),t("el-form-item",{attrs:{label:e.$t("public.fee")+": "}},[t("span",{staticClass:"fee"},[e._v("0.001 NVT")])])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(s){e.additionDialog=!1}}},[e._v(e._s(e.$t("password.password2")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.handleSubmit("jionNodeForm")}}},[e._v(e._s(e.$t("password.password3")))])],1)],1)],1),t("Password",{ref:"password",on:{passwordSubmit:e.passSubmit}})],1)},a=[],o=(t("ac6a"),t("ac4d"),t("8a81"),t("5df3"),t("1c4c"),t("7f7f"),t("6b54"),t("96cf"),t("3b8d")),r=(t("c5f6"),t("c32d")),i=t.n(r),c=t("bc9e"),u=t.n(c),d=t("1959"),l=t("6ace"),f=t("d1f0"),p=t("b301");function b(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=h(e))){var s=0,t=function(){};return{s:t,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a,o=!0,r=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(r)throw a}}}}function h(e,s){if(e){if("string"===typeof e)return g(e,s);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?g(e,s):void 0}}function g(e,s){(null==s||s>e.length)&&(s=e.length);for(var t=0,n=new Array(s);t<s;t++)n[t]=e[t];return n}var m={data:function(){var e=this,s=function(s,t,n){var a=Number(Object(l["b"])(Number(Object(l["r"])(5e5)),Number(e.nodeInfo.deposit))),o=Number(Object(l["b"])(e.balanceInfo.balance,Number(Object(l["d"])(t,1e8)))),r=/^\d+(?=\.{0,1}\d+$|$)/,i=/^\d{1,8}(\.\d{1,8})?$/;if(1===e.operateType){if(!t)return n(new Error(e.$t("consensusInfo.consensusInfo2")));if(r.exec(t)&&i.exec(t)){if(t<2e3)return n(new Error(e.$t("consensusInfo.consensusInfo43")));if(t>a)return n(new Error(e.$t("consensusInfo.consensusInfo41")+a+e.$t("consensusInfo.consensusInfo42")));if(o<.001)return n(new Error(e.$t("transfer.transfer131")+Number(Object(l["b"])(Number(Object(l["j"])(e.balanceInfo.balance)),.001))));n()}else n(new Error(e.$t("consensusInfo.consensusInfo3")))}else{var c=Number(Object(l["b"])(e.nodeInfo.deposit,2e12));if(!t)return n(new Error(e.$t("consensusInfo.consensusInfo16")));if(!r.exec(t)||!i.exec(t))return n(new Error(e.$t("consensusInfo.consensusInfo17")));if(t>Number(Object(l["j"])(c)))return n(new Error("您最多可以退出:"+Number(Object(l["j"])(c))));n()}};return{addressInfo:this.$store.getters.getSelectAddress,balanceInfo:{},agentAsset:JSON.parse(sessionStorage.getItem("info")),nodeInfo:{},fee:.001,outInfo:"",passwordType:0,nodeDepositData:[],nodeDepositLoading:!0,pageIndex:1,pageSize:5,pageTotal:0,jionNodeForm:{amount:""},jionNodeRules:{amount:[{validator:s,trigger:["blur","change"]}]},prefix:"",txHexRandom:"",signDataKeyRandom:"",additionDialog:!1,nodeInfoLoading:!0}},components:{Password:f["a"],BackBar:p["a"]},watch:{"$store.getters.getSelectAddress":{handler:function(e,s){e.address!==s.address&&(this.addressInfo=this.$store.getters.getSelectAddress,this.jionNodeForm.amount="",this.getSelectAddressInfo())}}},computed:{computeNodeType:function(){return[this.$t("nodeStatus.2"),this.$t("nodeStatus.1"),this.$t("nodeStatus.3")]},operateType:function(){return 0===this.passwordType?1:2}},created:function(){var e=this;Object(d["e"])(Object(l["e"])()).then((function(s){e.prefix=s})).catch((function(s){console.log(s),e.prefix=""})),this.getSelectAddressInfo(),this.getNodeInfoByHash(),Object(d["a"])(this.$route.query.hash)},mounted:function(){},methods:{getSelectAddressInfo:function(){this.getBalanceByAddress(),this.getNodeDepositByHash()},judgeNodeType:function(e,s){return e?this.computeNodeType[0]:s?this.computeNodeType[1]:this.computeNodeType[2]},getNodeInfoByHash:function(){var e=this;this.nodeInfoLoading=!0,this.$post("/","getConsensusNode",[this.$route.query.hash]).then((function(s){e.nodeInfoLoading=!1,s.hasOwnProperty("result")&&(s.result.agentReward=Object(l["j"])(s.result.agentReward),s.result.deposits=Object(l["j"])(s.result.deposit),s.result.totalDeposit=Object(l["j"])(s.result.totalDeposit),s.result.reward=Object(l["j"])(s.result.reward),s.result.createTime=i()(Object(l["k"])(1e3*s.result.createTime)).format("YYYY-MM-DD HH:mm:ss"),e.nodeInfo=s.result)})).catch((function(e){console.log("getConsensusNode:"+e)}))},getNodeDepositByHash:function(){var e=this;this.nodeDepositLoading=!0;var s=[this.pageIndex,this.pageSize,this.addressInfo.address,this.$route.query.hash];this.$post("/","getAccountDeposit",s).then((function(s){if(s.hasOwnProperty("result")){var t,n=b(s.result.list);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.amount=Object(l["j"])(a.amount),a.fee=Object(l["j"])(a.fee),a.createTime=i()(Object(l["k"])(1e3*a.createTime)).format("YYYY-MM-DD HH:mm:ss"),a.txHashs=Object(l["q"])(a.txHash,10)}}catch(o){n.e(o)}finally{n.f()}e.nodeDepositData=s.result.list,e.pageTotal=s.result.totalCount,e.nodeDepositLoading=!1}else e.nodeDepositLoading=!1})).catch((function(e){console.log("getConsensusDeposit:"+e)}))},nodeDepositPages:function(e){this.pageIndex=e,this.getNodeDepositByHash(this.pageIndex,this.pageSize,this.addressInfo.address,this.$route.query.hash)},addition:function(){this.additionDialog=!0,this.passwordType=0},quit:function(){this.additionDialog=!0,this.passwordType=1},handleSubmit:function(e){var s=this;this.$refs[e].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}s.$refs.password.showPassword(!0),s.additionDialog=!1,e.next=6;break;case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}())},getBalanceByAddress:function(){var e=this,s=[this.agentAsset.agentAsset.chainId,this.agentAsset.agentAsset.assetId,this.addressInfo.address];d["d"].apply(void 0,s).then((function(s){s.success?e.balanceInfo=s.data:e.$message({message:e.$t("public.err2")+s,type:"error",duration:1e3})})).catch((function(s){e.$message({message:e.$t("public.err3")+s,type:"error",duration:1e3})}))},stopNode:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.passwordType=2,this.$refs.password.showPassword(!0);case 2:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}(),passSubmit:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(s){var t,n,a,o,r,i,c,f,p,b,h,g,m,I,v,_,$,y=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=u.a.decrypteOfAES(this.addressInfo.aesPri,s),n=u.a.importByKey(this.addressInfo.chainId,t,s,this.prefix),n.address!==this.addressInfo.address){e.next=81;break}if(a=Number(Object(l["d"])(this.jionNodeForm.amount,1e8)),o={fromAddress:this.addressInfo.address,assetsChainId:this.agentAsset.agentAsset.chainId,assetsId:this.agentAsset.agentAsset.assetId,amount:a,fee:1e5},r={},i="",c=this.addressInfo.pub,f="",0!==this.passwordType){e.next=25;break}return e.next=12,Object(d["h"])(o,this.balanceInfo,28);case 12:if(r=e.sent,p={address:this.addressInfo.address,agentHash:this.$route.query.hash,amount:a},r.success){e.next=17;break}return this.$message({message:this.$t("public.err1")+r.data,type:"error",duration:1e3}),e.abrupt("return");case 17:return e.next=19,u.a.transactionAssemble(r.data.inputs,r.data.outputs,f,28,p);case 19:return b=e.sent,e.next=22,u.a.transactionSerialize(t,c,b);case 22:i=e.sent,e.next=77;break;case 25:if(1!==this.passwordType){e.next=53;break}return h=this.nodeInfo.txHash,e.next=29,Object(d["f"])(h,a,0);case 29:if(g=e.sent,console.log(g),g.success){e.next=34;break}return console.log("获取退出保证金ReduceNonceList错误"),e.abrupt("return");case 34:return o.depositHash=h,o.nonceList=g.data,e.next=38,Object(d["h"])(o,this.balanceInfo,29);case 38:if(r=e.sent,console.log(r),r.success){e.next=44;break}return this.$message({message:this.$t("public.err1")+r.data,type:"error",duration:3e3}),console.log("inputOutputs组装失败!"),e.abrupt("return");case 44:return m={agentHash:h,address:o.fromAddress,amount:o.amount},e.next=47,u.a.transactionAssemble(r.data.inputs,r.data.outputs,f,29,m);case 47:return I=e.sent,e.next=50,u.a.transactionSerialize(t,c,I);case 50:i=e.sent,e.next=77;break;case 53:if(2!==this.passwordType){e.next=77;break}return v=this.nodeInfo.txHash,e.next=57,Object(d["f"])(v,"0",1);case 57:if(_=e.sent,_.success){e.next=61;break}return console.log("获取退出保证金ReduceNonceList错误"),e.abrupt("return");case 61:return o.nonceList=_.data,o.amount=this.nodeInfo.deposit,e.next=65,Object(d["h"])(o,this.balanceInfo,9);case 65:if(r=e.sent,console.log(r),r.success){e.next=70;break}return console.log("inputOutputs组装失败!"),e.abrupt("return");case 70:return e.next=72,u.a.transactionAssemble(r.data.inputs,r.data.outputs,f,9,{address:o.fromAddress,agentHash:v});case 72:return $=e.sent,e.next=75,u.a.transactionSerialize(t,c,$);case 75:i=e.sent,console.log(i);case 77:return e.next=79,Object(d["i"])(i).then((function(e){e.success?(y.$message({message:y.$t("tips.tips0"),type:"success",duration:1e3}),y.$router.push({name:"txList"})):y.$message({message:y.$t("public.err")+e.data.code,type:"error",duration:1e3})})).catch((function(e){y.$message({message:y.$t("public.err0")+e,type:"error",duration:1e3})}));case 79:e.next=82;break;case 81:this.$message({message:this.$t("address.address13"),type:"error",duration:1e3});case 82:case"end":return e.stop()}}),e,this)})));function s(s){return e.apply(this,arguments)}return s}(),toUrl:function(e,s){Object(l["g"])(e,s)}}},I=m,v=(t("45e9"),t("2877")),_=Object(v["a"])(I,n,a,!1,null,null,null);s["default"]=_.exports},b301:function(e,s,t){"use strict";var n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"back",attrs:{backUrl:e.backUrl}},[t("span",{staticClass:"back-box",on:{click:e.back}},[t("i",{staticClass:"el-icon-arrow-left"}),t("span",[e._v(e._s(e.backTitle))])])])},a=[],o={props:{backTitle:{type:String,default:""},backUrl:{type:String,default:"1"},backParams:{type:String,default:""}},methods:{back:function(){"1"===this.backUrl?this.$router.go(-1):this.$router.push({name:this.backUrl})}}},r=o,i=(t("2e64"),t("2877")),c=Object(i["a"])(r,n,a,!1,null,null,null);s["a"]=c.exports},ff03:function(e,s,t){}}]);
//# sourceMappingURL=chunk-51b33656.5da66d7f.js.map