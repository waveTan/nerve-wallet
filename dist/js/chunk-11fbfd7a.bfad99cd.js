(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11fbfd7a"],{"3b2b":function(t,e,a){var n=a("7726"),s=a("5dbc"),i=a("86cc").f,r=a("9093").f,l=a("aae3"),o=a("0bfb"),c=n.RegExp,g=c,u=c.prototype,d=/a/g,p=/a/g,k=new c(d)!==d;if(a("9e1e")&&(!k||a("79e5")((function(){return p[a("2b4c")("match")]=!1,c(d)!=d||c(p)==p||"/a/i"!=c(d,"i")})))){c=function(t,e){var a=this instanceof c,n=l(t),i=void 0===e;return!a&&n&&t.constructor===c&&i?t:s(k?new g(n&&!i?t.source:t,e):g((n=t instanceof c)?t.source:t,n&&i?o.call(t):e),a?this:u,c)};for(var f=function(t){t in c||i(c,t,{configurable:!0,get:function(){return g[t]},set:function(e){g[t]=e}})},h=r(g),b=0;h.length>b;)f(h[b++]);u.constructor=c,c.prototype=u,a("2aba")(n,"RegExp",c)}a("7a56")("RegExp")},"3e81":function(t,e,a){},"599e":function(t,e,a){"use strict";var n=a("3e81"),s=a.n(n);s.a},de29:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"staking-page"},[a("div",{staticClass:"w1200"},[a("div",{staticClass:"staking-info clear"},[a("div",{staticClass:"total-staking shadow1 fl"},[a("h3",[t._v("\n          "+t._s(t.$t("staking.staking0"))+"\n          "),a("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(e){t.joinStakingDialog=!0}}},[t._v(t._s(t.$t("staking.staking1")))])],1),a("div",{staticClass:"info-wrap"},[a("div",{staticClass:"infos clear"},[a("div",{staticClass:"fl"},[a("p",{staticClass:"info-name"},[t._v(t._s(t.$t("staking.staking0")))]),a("p",{staticClass:"info-val"},[a("span",[t._v("≈ ")]),t._v("$"+t._s(t.totalStaking))])]),a("div",{staticClass:"fl"},[a("p",{staticClass:"info-name"},[t._v(t._s(t.$t("staking.staking2")))]),a("p",{staticClass:"info-val"},[t._v(t._s(t.totalReward)+" "),a("span",[t._v(t._s(t.prefix))])])])]),a("div",{staticClass:"chart-wrap"},[a("pie-chart",{attrs:{data:t.pieData,extends:t.chartExtends}})],1)])]),a("div",{staticClass:"staking-rate shadow1 fl"},[a("h3",[t._v(t._s(t.$t("staking.staking3")))]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.stakingRateLoading,expression:"stakingRateLoading"}],staticClass:"staking_rate_table",attrs:{data:t.stakingRate,stripe:"","max-height":"220"}},[a("el-table-column",{attrs:{fixed:"",width:"80",label:t.$t("staking.staking4"),align:"center",prop:"symbol"}}),a("el-table-column",{attrs:{width:"78",label:t.$t("staking.staking5"),align:"center",prop:"rate1"}}),a("el-table-column",{attrs:{width:"85",label:t.$t("staking.staking6"),align:"center",prop:"rate2"}}),a("el-table-column",{attrs:{width:"95",label:t.$t("staking.staking7"),align:"center",prop:"rate3"}}),a("el-table-column",{attrs:{width:"82",label:t.$t("staking.staking8"),align:"center",prop:"rate4"}}),a("el-table-column",{attrs:{width:"78",label:t.$t("staking.staking9"),align:"center",prop:"rate5"}}),a("el-table-column",{attrs:{width:"78",label:t.$t("staking.staking10"),align:"center",prop:"rate6"}}),a("el-table-column",{attrs:{width:"78",label:t.$t("staking.staking11"),align:"center",prop:"rate7"}}),a("el-table-column",{attrs:{width:"88",label:t.$t("staking.staking12"),align:"center",prop:"rate8"}})],1)],1)]),a("div",{staticClass:"my-staking"},[a("el-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:t.$t("staking.staking13"),name:"first"}},[a("staking-list",{attrs:{staking:"",data:t.stakingList},on:{changeStaking:t.showChangeStakingDialog,quitStaking:t.quitStaking}})],1),a("el-tab-pane",{attrs:{label:t.$t("staking.staking14"),name:"second"}},[a("staking-list",{attrs:{data:t.stakingList}})],1)],1),a("div",{staticClass:"pages"},[a("div",{staticClass:"page-total"},[t._v("\n          "+t._s(t.$t("public.display"))+" "+t._s(t.pageIndex-1===0?1:(t.pageIndex-1)*t.pageSize)+"-"+t._s(t.pageIndex*t.pageSize)+"\n          "+t._s(t.$t("public.total"))+" "+t._s(t.pageTotal)+"\n        ")]),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.pageTotal>t.pageSize,expression:"pageTotal>pageSize"}],staticClass:"fr",attrs:{background:"","page-size":t.pageSize,layout:" prev, pager, next, jumper",total:t.pageTotal},on:{"current-change":t.pageSizeChange}})],1)],1)]),a("el-dialog",{staticClass:"join-staking-dialog form-dialog",attrs:{title:t.$t("staking.staking1"),visible:t.joinStakingDialog,width:"600px"},on:{"update:visible":function(e){t.joinStakingDialog=e}}},[a("el-form",{ref:"joinStakingForm",attrs:{model:t.joinStakingModel,rules:t.joinStakingRule}},[a("el-form-item",{attrs:{label:t.$t("staking.staking4")+": ",prop:"currency"}},[a("el-select",{on:{change:t.changeCurrency},model:{value:t.joinStakingModel.currency,callback:function(e){t.$set(t.joinStakingModel,"currency",e)},expression:"joinStakingModel.currency"}},t._l(t.$store.state.accountList,(function(t){return a("el-option",{key:t.assetKey,attrs:{label:t.symbol,value:t.symbol}})})),1)],1),a("div",{staticClass:"fr font12",staticStyle:{padding:"8px 0 0 0"}},[t._v(t._s(t.$t("public.usableBalance"))+":\n        "+t._s(t.currentCurrency.available)+"\n      ")]),a("el-form-item",{attrs:{label:t.$t("staking.staking16")+": ",prop:"amount"}},[a("el-input",{model:{value:t.joinStakingModel.amount,callback:function(e){t.$set(t.joinStakingModel,"amount",e)},expression:"joinStakingModel.amount"}})],1),a("el-form-item",{attrs:{label:t.$t("staking.staking17")+": ",prop:"deadline"}},[a("el-select",{model:{value:t.joinStakingModel.deadline,callback:function(e){t.$set(t.joinStakingModel,"deadline",e)},expression:"joinStakingModel.deadline"}},t._l(t.deadlineList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:t.$t("staking.staking29")+": "}},[a("span",{staticClass:"estimate"},[t._v("123456798 "+t._s(t.prefix)+" (+64.15%)")])])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.joinStakingDialog=!1}}},[t._v(t._s(t.$t("password.password2")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.joinStaking}},[t._v(t._s(t.$t("password.password3")))])],1)],1),a("el-dialog",{staticClass:"change-staking-dialog form-dialog",attrs:{title:t.$t("staking.staking30"),visible:t.changeStakingDialog,width:"600px"},on:{"update:visible":function(e){t.changeStakingDialog=e}}},[a("el-form",{ref:"changeStakingForm",attrs:{model:t.changeStakingModel,rules:t.changeStakingRule}},[a("el-form-item",{attrs:{label:t.$t("staking.staking4")+": "}},[a("span",{staticClass:"currency-label"},[t._v(t._s(t.currency))])]),a("div",{staticClass:"fr font12",staticStyle:{padding:"8px 0 0 0"}},[t._v(t._s(t.$t("public.usableBalance"))+": "+t._s(t.addressInfo.balance))]),a("el-form-item",{attrs:{label:t.$t("staking.staking16")+": ",prop:"amount"}},[a("el-input",{model:{value:t.changeStakingModel.amount,callback:function(e){t.$set(t.changeStakingModel,"amount",e)},expression:"changeStakingModel.amount"}})],1),a("el-form-item",{attrs:{label:t.$t("staking.staking17")+": ",prop:"deadline"}},[a("el-select",{model:{value:t.changeStakingModel.deadline,callback:function(e){t.$set(t.changeStakingModel,"deadline",e)},expression:"changeStakingModel.deadline"}},t._l(t.deadlineList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:t.$t("nav.consensus")+": ",prop:"node"}},[a("el-select",{model:{value:t.changeStakingModel.node,callback:function(e){t.$set(t.changeStakingModel,"node",e)},expression:"changeStakingModel.node"}},t._l(t.deadlineList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:t.$t("staking.staking29")+": "}},[a("span",{staticClass:"estimate"},[t._v("123456798 "+t._s(t.prefix)+" (+64.15%)")])])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.changeStakingDialog=!1}}},[t._v(t._s(t.$t("password.password2")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.changeStaking}},[t._v(t._s(t.$t("password.password3")))])],1)],1),a("Password",{ref:"password",on:{passwordSubmit:t.submit}})],1)},s=[],i=(a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("7f7f"),a("6b54"),a("96cf"),a("3b8d")),r=(a("ac6a"),a("c5f6"),a("3b2b"),a("c32d")),l=a.n(r),o=a("bc9e"),c=a.n(o),g=a("748a"),u=a("d1f0"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{attrs:{data:t.data,stripe:""}},[a("el-table-column",{attrs:{width:"10"}}),a("el-table-column",{attrs:{"min-width":"60",label:t.$t("staking.staking15"),align:"center",prop:"blockHeight"}}),a("el-table-column",{attrs:{"min-width":"55",label:t.$t("staking.staking4"),align:"center",prop:"symbol"}}),a("el-table-column",{attrs:{"min-width":"90",label:t.$t("staking.staking16"),align:"center",prop:"amounts"}}),a("el-table-column",{attrs:{"min-width":"90",label:t.$t("staking.staking17"),align:"center",prop:"type"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.$t("stakingType."+e.row.type)))])]}}])}),a("el-table-column",{attrs:{"min-width":"95",label:t.$t("staking.staking31"),align:"center",prop:"extra"}}),a("el-table-column",{attrs:{"min-width":"95",label:t.$t("staking.staking19"),align:"center",prop:"extra"}}),a("el-table-column",{attrs:{"min-width":"120",label:t.$t("staking.staking20"),align:"center",prop:"createTime"}}),t.staking?a("el-table-column",{attrs:{"min-width":"120",label:t.$t("staking.staking21"),align:"center",prop:"endTime"}}):t._e(),t.staking?a("el-table-column",{attrs:{"min-width":"90",label:t.$t("staking.staking22")},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.type?a("div",[a("span",{staticClass:"click",on:{click:function(a){return t.handleChange(e.row)}}},[t._v(t._s(t.$t("staking.staking23")))]),t._v(" 丨\n        "),a("span",{staticClass:"click",on:{click:function(a){return t.handleQuit(e.row)}}},[t._v(t._s(t.$t("staking.staking24")))])]):a("span",[t._v("-")])]}}],null,!1,801343696)}):t._e()],1)},p=[],k=a("db49"),f={name:"",props:{data:{type:Array,default:function(){return[]}},staking:{type:Boolean,default:!1}},data:function(){return{prefix:k["e"].prefix}},methods:{handleChange:function(t){this.$emit("changeStaking",t)},handleQuit:function(t){this.$emit("quitStaking",t)}}},h=f,b=a("2877"),m=Object(b["a"])(h,d,p,!1,null,null,null),v=m.exports,S=a("6ace"),$=a("1959");function w(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=y(t))){var e=0,a=function(){};return{s:a,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s,i=!0,r=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){r=!0,s=t},f:function(){try{i||null==n.return||n.return()}finally{if(r)throw s}}}}function y(t,e){if(t){if("string"===typeof t)return _(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var x={data:function(){var t=this;this.chartExtends={series:{center:["45%","50%"],radius:["52%","76%"]}};var e=function(e,a,n){""===a?n(new Error(t.$t("staking.staking26"))):n()},a=function(e,a,n){var s=8,i=new RegExp("^([1-9][\\d]{0,20}|0)(\\.[\\d]{0,8})?$");""===a?n(new Error(t.$t("staking.staking27"))):i.exec(a)?Number(a)<.001?n(new Error(t.$t("transfer.transfer13"))):0===t.addressInfo.balance?n(new Error(t.$t("tips.tips23"))):Number(a)>Number(Object(S["b"])(t.addressInfo.balance,.001))?n(new Error(t.$t("transfer.transfer131")+Number(Object(S["b"])(t.addressInfo.balance,.001)))):n():n(new Error(t.$t("transfer.transfer12")+": "+s))},n=function(e,a,n){""===a?n(new Error(t.$t("staking.staking28"))):n()};return{addressInfo:this.$store.getters.getSelectAddress,totalStaking:0,totalReward:0,prefix:k["e"].prefix,pieData:[],stakingRateLoading:!0,stakingRate:[],activeTab:"first",stakingList:[],pageIndex:1,pageSize:5,pageTotal:0,joinStakingDialog:!1,joinStakingModel:{currency:"",amount:"",deadline:""},joinStakingRule:{currency:[{validator:e,trigger:["blur"]}],amount:[{validator:a,trigger:["blur","change"]}],deadline:[{validator:n,trigger:["blur"]}]},currentCurrency:{},changeStakingDialog:!1,currency:"",changeStakingModel:{amount:"",deadline:"",node:""},changeStakingRule:{amount:[{validator:a,trigger:["blur","change"]}],deadline:[{validator:n,trigger:["blur"]}]},quitStakingDialog:!1}},watch:{"$store.getters.getSelectAddress":{handler:function(t,e){t.address!==e.address&&(this.addressInfo=this.$store.getters.getSelectAddress)}}},computed:{deadlineList:function(){return[{label:this.$t("staking.staking5"),value:0},{label:this.$t("staking.staking6"),value:1},{label:this.$t("staking.staking7"),value:2},{label:this.$t("staking.staking8"),value:3},{label:this.$t("staking.staking9"),value:4},{label:this.$t("staking.staking10"),value:5},{label:this.$t("staking.staking11"),value:6}]}},components:{PieChart:g["a"],Password:u["a"],stakingList:v},created:function(){this.addressInfo=this.$store.getters.getSelectAddress,this.getStackingInfo(),this.getStackingRate(),this.getStackingList(this.pageIndex,this.pageSize,this.addressInfo.address)},mounted:function(){},methods:{getStackingInfo:function(){var t=this;this.$post("/","getStackingInfo",[]).then((function(e){if(e.hasOwnProperty("result")){var a=0;e.result.map((function(e){a+=e.usdValue,t.pieData.push({key:e.symbol,value:e.usdValue,rate:100*e.rate+"%"})})),t.totalStaking=a}}))},getStackingRate:function(){var t=this;this.$post("/","getStackingRate",[]).then((function(e){if(e.hasOwnProperty("result")){var a=[];e.result.map((function(t){var e={};e.symbol=t.symbol,t.detailList.forEach((function(t,a){e["rate"+(a+1)]=Object(S["d"])(t.totalAddition,100).toFixed(2)+"%"})),a.push(e)})),t.stakingRate=a,t.stakingRateLoading=!1}}))},changeCurrency:function(t){var e=this.$store.state.accountList.filter((function(e){return e.symbol===t}))[0];this.currentCurrency=e||{}},getStackingAssetList:function(){this.$post("/","getStackingAssetList",[]).then((function(t){console.log(t),t.hasOwnProperty("result")})).catch((function(t){console.log("getAssetList:"+t)}))},joinStaking:function(){var t=this;this.$refs.joinStakingForm.validate((function(e){if(!e)return!1;t.submitType=1,t.$refs.password.showPassword(!0),t.joinStakingDialog=!1}))},showChangeStakingDialog:function(t){this.currency=t.symbol,this.changeStakingDialog=!0},changeStaking:function(){var t=this;this.$refs.changeStakingForm.validate((function(e){if(!e)return!1;t.submitType=2,t.$refs.password.showPassword(!0),t.changeStakingDialog=!1}))},quitStaking:function(t){this.submitType=3,this.$refs.password.showPassword(!0),this.quitStakingDialog=!1},submit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(S["p"])(this.addressInfo,e);case 2:if(a=t.sent,a.success){t.next=6;break}return this.$message({message:this.$t("tips.tips24"),type:"error",duration:3e3}),t.abrupt("return");case 6:t.t0=this.submitType,t.next=1===t.t0?9:2===t.t0?11:13;break;case 9:return this.submitJoinStaking(a),t.abrupt("break",14);case 11:return this.submitChangeStaking(a),t.abrupt("break",14);case 13:this.submitQuitStaking(a);case 14:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),submitJoinStaking:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,n,s,i,r,l,o,g,u=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=k["e"],n={fromAddress:e.address,assetsChainId:this.currentCurrency.chainId,assetsId:this.currentCurrency.assetId,amount:Number(Object(S["r"])(this.joinStakingModel.amount,this.currentCurrency.decimals)),fee:1e5},s={},i={},a.chainId===n.assetsChainId&&a.assetId===n.assetsId){t.next=13;break}return t.next=7,Object($["d"])(a.chainId,a.assetId,n.fromAddress);case 7:if(i=t.sent,i.success){t.next=11;break}return console.log("获取账户feeBalanceInfo错误"),t.abrupt("return");case 11:n.feeBalanceInfo=i.data,n.defaultAssetsInfo=a;case 13:return t.next=15,Object($["d"])(n.assetsChainId,n.assetsId,n.fromAddress);case 15:if(s=t.sent,s.success){t.next=19;break}return console.log("获取账户balanceInfo错误"),t.abrupt("return");case 19:return n.locked=-1,t.next=22,Object($["h"])(n,s.data,5);case 22:if(r=t.sent,r.success){t.next=26;break}return console.log("inputOutputs组装失败!"),t.abrupt("return");case 26:return l={deposit:n.amount,address:n.fromAddress,assetsChainId:n.assetsChainId,assetsId:n.assetsId,depositType:0===this.joinStakingModel.deadline?0:1,timeType:0===this.joinStakingModel.deadline?0:this.joinStakingModel.deadline},t.next=29,c.a.transactionAssemble(r.data.inputs,r.data.outputs,"",5,l);case 29:return o=t.sent,t.next=32,c.a.transactionSerialize(e.pri,e.pub,o);case 32:return g=t.sent,t.next=35,Object($["i"])(g).then((function(t){t.success?(u.$message({message:u.$t("tips.tips0"),type:"success",duration:1e3}),u.$router.push({name:"txList"})):u.$message({message:u.$t("public.err")+t.data.code,type:"error",duration:1e3})})).catch((function(t){u.$message({message:u.$t("public.err0")+t,type:"error",duration:1e3})}));case 35:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),submitChangeStaking:function(t){},submitQuitStaking:function(t){},getStackingList:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a,n){var s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$post("/","pageStackingListByAddress",[e,a,n]).then((function(t){if(console.log(t),t.hasOwnProperty("result")){var e,a=w(t.result.list);try{for(a.s();!(e=a.n()).done;){var n=e.value;n.amounts=Number(Object(S["j"])(n.amount,n.decimal)),n.createTime=l()(Object(S["k"])(1e3*n.createTime)).format("YYYY-MM-DD HH:mm:ss")}}catch(i){a.e(i)}finally{a.f()}s.stakingList=t.result.list,s.pageTotal=t.result.totalCount}else s.myNodeLoading=!1})).catch((function(t){console.log("getAccountConsensus:"+t)}));case 2:case"end":return t.stop()}}),t,this)})));function e(e,a,n){return t.apply(this,arguments)}return e}(),pageSizeChange:function(t){this.pageIndex=t,this.getStackingList(this.pageIndex,this.pageSize,this.addressInfo.address)}}},C=x,j=(a("599e"),Object(b["a"])(C,n,s,!1,null,null,null));e["default"]=j.exports}}]);
//# sourceMappingURL=chunk-11fbfd7a.bfad99cd.js.map